<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zenith Protocol – Elevated Edition</title>
  <!--
    This page represents a complete re‑imagining of the original Zenith
    Protocol website. It retains the educational intent of exploring the
    cultural symbolism embedded in currency while extending the design with
    enhanced interactivity, richer animations and thoughtful usability
    features. All styling is self‑contained to ensure consistent
    presentation across modern browsers without external dependencies.
  -->
  <style>
    /*
      Root theme variables control both dark and light modes. When the
      document has the class .light-mode applied, alternate values are
      referenced to provide a high contrast light scheme. Using CSS
      variables avoids the need to duplicate entire style rules for
      theme changes.
    */
    :root {
      --bg: #020617;
      --surface: #0f172a;
      --primary: #06b6d4;
      --secondary: #eab308;
      --magenta: #a855f7;
      --light: #e2e8f0;
      --muted: #64748b;
      /* Light mode overrides */
      --bg-light: #f9fafb;
      --surface-light: #ffffff;
      --text-dark: #1e293b;
      --text-muted-dark: #475569;
    }
    .light-mode {
      --bg: var(--bg-light);
      --surface: var(--surface-light);
      --light: var(--text-dark);
      --muted: var(--text-muted-dark);
    }

    /* Global resets and base styles */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: sans-serif;
      background: var(--bg);
      color: var(--light);
      line-height: 1.6;
      overflow-x: hidden;
    }
    a { color: var(--primary); text-decoration: none; }
    a:hover { text-decoration: underline; }
    h1,h2,h3,h4 { font-weight: 600; }

    /* Scroll progress indicator at the very top */
    #scroll-progress {
      position: fixed;
      top: 0;
      left: 0;
      height: 4px;
      width: 0;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      z-index: 999;
    }

    /* Sticky navigation bar with theme toggle */
    header {
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 50;
      backdrop-filter: blur(8px);
      background: rgba(2,6,23,0.8);
      border-bottom: 1px solid rgba(6,182,212,0.2);
      transition: background 0.3s;
    }
    .light-mode header {
      background: rgba(249,250,251,0.8);
      border-bottom-color: rgba(10,162,200,0.2);
    }
    .nav-container {
      max-width: 1200px;
      margin: auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 1.5rem;
    }
    .brand {
      font-size: 1.3rem;
      letter-spacing: 1px;
      color: var(--primary);
      font-weight: 700;
      user-select: none;
    }
    nav ul {
      list-style: none;
      display: flex;
      gap: 1.2rem;
    }
    nav a {
      color: var(--light);
      font-weight: 500;
      transition: color 0.2s ease;
    }
    nav a:hover { color: var(--secondary); }
    /* Theme toggle button */
    .theme-toggle {
      cursor: pointer;
      display: flex;
      align-items: center;
      padding: 0.4rem;
      border-radius: 50%;
      border: 2px solid var(--primary);
      transition: background 0.3s;
    }
    .theme-toggle:hover { background: var(--surface); }
    .theme-toggle span {
      display: block;
      width: 20px;
      height: 20px;
      background: var(--primary);
      border-radius: 50%;
    }
    .light-mode .theme-toggle span { background: var(--secondary); }

    /* Hero section with swirling shapes and glitch title */
    .hero {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      padding-top: 4rem;
      text-align: center;
      overflow: hidden;
    }
    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.05), transparent 70%), url('assets/hero.png') center/cover no-repeat;
      opacity: 0.15;
      filter: grayscale(0.5);
    }
    /* Animated orbiting rings */
    .orbit {
      position: absolute;
      top: 50%;
      left: 50%;
      border-radius: 50%;
      border: 1.5px dashed var(--primary);
      animation: spin 40s linear infinite;
      opacity: 0.2;
    }
    .orbit:nth-child(1) { width: 300px; height: 300px; margin:-150px 0 0 -150px; animation-duration: 25s; }
    .orbit:nth-child(2) { width: 500px; height: 500px; margin:-250px 0 0 -250px; border-color: var(--secondary); animation-duration: 35s; }
    .orbit:nth-child(3) { width: 700px; height: 700px; margin:-350px 0 0 -350px; border-color: var(--magenta); animation-duration: 45s; }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    .hero-content {
      position: relative;
      z-index: 1;
      max-width: 800px;
      padding: 0 1rem;
    }
    .hero .tagline {
      letter-spacing: 0.3em;
      font-size: 0.85rem;
      color: var(--secondary);
      text-transform: uppercase;
      margin-bottom: 1rem;
    }
    .glitch {
      font-size: 3.5rem;
      font-weight: 700;
      text-transform: uppercase;
      position: relative;
      display: inline-block;
      margin-bottom: 1.5rem;
    }
    .glitch::before, .glitch::after {
      content: attr(data-text);
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      overflow: hidden;
    }
    .glitch::before {
      left: 2px;
      text-shadow: -2px 0 var(--magenta);
      clip-path: polygon(0 2%, 100% 2%, 100% 40%, 0 40%);
      animation: glitch-top 3s infinite linear alternate-reverse;
    }
    .glitch::after {
      left: -2px;
      text-shadow: -2px 0 var(--primary);
      clip-path: polygon(0 60%, 100% 60%, 100% 100%, 0 100%);
      animation: glitch-bottom 2.5s infinite linear alternate-reverse;
    }
    @keyframes glitch-top {
      0% { transform: translate(0,0); }
      20% { transform: translate(-3px,-2px); }
      40% { transform: translate(3px,2px); }
      60% { transform: translate(-3px,2px); }
      80% { transform: translate(3px,-2px); }
      100% { transform: translate(0,0); }
    }
    @keyframes glitch-bottom {
      0% { transform: translate(0,0); }
      20% { transform: translate(3px,2px); }
      40% { transform: translate(-3px,-2px); }
      60% { transform: translate(3px,-2px); }
      80% { transform: translate(-3px,2px); }
      100% { transform: translate(0,0); }
    }
    .hero p {
      font-size: 1.1rem;
      margin: 0 auto 2rem;
      max-width: 600px;
      color: var(--muted);
    }
    .cta {
      position: relative;
      display: inline-block;
      padding: 0.9rem 2rem;
      border-radius: 50px;
      background: linear-gradient(90deg, var(--primary), var(--magenta));
      color: var(--bg);
      font-weight: 700;
      overflow: hidden;
      transition: transform 0.3s;
    }
    .cta:hover { transform: translateY(-3px) scale(1.05); }
    .cta span.ripple {
      position: absolute;
      top: 0;
      left: -100%;
      width: 200%;
      height: 100%;
      background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.4), transparent 70%);
      animation: ripple 2.5s infinite;
    }
    @keyframes ripple { from { transform: translateX(0); } to { transform: translateX(50%); } }

    /* Section base styling */
    section {
      padding: 4rem 1rem;
      position: relative;
    }
    .section-header {
      font-size: 2rem;
      text-align: center;
      margin-bottom: 2rem;
      position: relative;
    }
    .section-header::after {
      content: '';
      width: 90px;
      height: 3px;
      background: var(--secondary);
      display: block;
      margin: 0.6rem auto 0;
    }

    /* Console section styling */
    #console-wrapper {
      max-width: 800px;
      margin: 0 auto;
    }
    #console {
      background: var(--surface);
      border: 2px solid var(--primary);
      border-radius: 8px;
      padding: 1rem;
      font-family: monospace;
      font-size: 0.85rem;
      height: 200px;
      overflow-y: auto;
      margin-bottom: 1rem;
    }
    #console p { margin-bottom: 0.3rem; }
    #console .user { color: var(--secondary); }
    #console .system { color: var(--primary); }
    #input-bar {
      display: flex;
      align-items: center;
      background: var(--surface);
      border: 2px solid var(--primary);
      border-radius: 8px;
      overflow: hidden;
    }
    #input-bar input {
      flex: 1;
      background: transparent;
      border: none;
      padding: 0.8rem;
      color: var(--light);
      font-family: monospace;
    }
    #input-bar button {
      background: var(--primary);
      border: none;
      padding: 0.8rem 1rem;
      color: var(--bg);
      font-weight: 700;
      cursor: pointer;
      transition: background 0.3s;
    }
    #input-bar button:hover { background: var(--secondary); }
    /* Mastery progress bar inside console section */
    .mastery-container {
      background: var(--surface);
      border: 2px solid var(--magenta);
      border-radius: 8px;
      height: 20px;
      width: 100%;
      margin-top: 1rem;
      overflow: hidden;
    }
    .mastery-bar {
      height: 100%;
      width: 0;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      transition: width 0.4s ease;
    }

    /* Steps grid with reveal animation */
    .steps-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px,1fr));
      gap: 2rem;
    }
    .step {
      background: var(--surface);
      border-radius: 10px;
      padding: 1.5rem;
      border: 1px solid rgba(255,255,255,0.08);
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    .step.visible {
      opacity: 1;
      transform: translateY(0);
    }
    .step h3 {
      font-size: 1.3rem;
      margin-bottom: 0.5rem;
      color: var(--primary);
    }
    .step p {
      font-size: 0.9rem;
      color: var(--muted);
    }

    /* Clue cards updated with tilt and flip on hover */
    .clue-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
      gap: 2rem;
      perspective: 800px;
    }
    .clue {
      position: relative;
      width: 100%;
      height: 270px;
      transform-style: preserve-3d;
      transition: transform 0.8s;
      cursor: pointer;
    }
    .clue:hover { transform: rotateY(180deg); }
    .clue-face {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 12px;
      backface-visibility: hidden;
      box-shadow: 0 6px 12px rgba(0,0,0,0.4);
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 1rem;
    }
    .clue-front {
      background: url('assets/dollars_coins.jpg') center/cover no-repeat;
      color: var(--light);
    }
    .clue-front h4 { margin-bottom: 0.5rem; font-size: 1.1rem; }
    .clue-front p { font-size: 0.85rem; }
    .clue-back {
      background: var(--surface);
      transform: rotateY(180deg);
      text-align: center;
    }
    .clue-back h4 { margin-bottom: 0.5rem; font-size: 1.1rem; color: var(--secondary); }
    .clue-back p { font-size: 0.85rem; color: var(--muted); }

    /* Gallery section */
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px,1fr));
      gap: 1.5rem;
      max-width: 1000px;
      margin: 0 auto;
    }
    .gallery-item {
      position: relative;
      overflow: hidden;
      border-radius: 12px;
      cursor: pointer;
    }
    .gallery-item img {
      width: 100%;
      height: auto;
      display: block;
      transition: transform 0.5s;
    }
    .gallery-item:hover img { transform: scale(1.1); }
    /* Lightbox overlay */
    .lightbox {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      cursor: pointer;
    }
    .lightbox img {
      max-width: 90%;
      max-height: 90%;
      border-radius: 12px;
    }

    /* Testimonials */
    .testimonials {
      max-width: 900px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px,1fr));
      gap: 2rem;
    }
    .testimonial {
      background: var(--surface);
      border-radius: 10px;
      padding: 1.5rem;
      box-shadow: 0 5px 10px rgba(0,0,0,0.3);
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s, transform 0.6s;
    }
    .testimonial.visible {
      opacity: 1;
      transform: translateY(0);
    }
    .testimonial p { font-size: 0.9rem; color: var(--muted); margin-bottom: 0.8rem; }
    .testimonial .author { font-weight: 600; color: var(--primary); }

    /* FAQ */
    .faq {
      max-width: 800px;
      margin: 0 auto;
    }
    .faq-item {
      margin-bottom: 1.2rem;
    }
    .faq-item h4 {
      font-size: 1.1rem;
      margin-bottom: 0.3rem;
      color: var(--primary);
    }
    .faq-item p { font-size: 0.9rem; color: var(--muted); }

    /* Resources list */
    .resources ul { list-style: none; max-width: 800px; margin: 0 auto; padding-left: 0; }
    .resources li { margin-bottom: 0.8rem; position: relative; padding-left: 1.6rem; }
    .resources li::before {
      content: '\25cf';
      position: absolute;
      left: 0;
      top: 0.4rem;
      font-size: 0.6rem;
      color: var(--primary);
    }

    /* Footer */
    footer {
      background: #0a0e23;
      color: var(--muted);
      font-size: 0.8rem;
      padding: 2rem 1rem;
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    footer ol { margin-left: 1.4rem; }
    footer li { margin-bottom: 0.4rem; }
    footer a { color: var(--secondary); }
  </style>
</head>
<body>
  <div id="scroll-progress"></div>
  <!-- Navigation -->
  <header>
    <div class="nav-container">
      <div class="brand">Zenith&nbsp;Protocol</div>
      <nav>
        <ul>
          <li><a href="#console-section">Console</a></li>
          <li><a href="#steps-section">Steps</a></li>
          <li><a href="#clue-section">Clues</a></li>
          <li><a href="#gallery-section">Gallery</a></li>
          <li><a href="#resources-section">Resources</a></li>
        </ul>
      </nav>
      <div class="theme-toggle" id="theme-toggle" title="Toggle light/dark mode">
        <span></span>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero" id="top">
    <div class="orbit"></div>
    <div class="orbit"></div>
    <div class="orbit"></div>
    <div class="hero-content">
      <div class="tagline">Activate your curiosity</div>
      <h1 class="glitch" data-text="Zenith">Zenith</h1>
      <p>Transcend your limits by decoding the stories embedded in our currencies. Immerse yourself in a world where culture and symbolism converge into a new form of mastery.</p>
      <a href="#console-section" class="cta">
        <span class="ripple"></span>
        Begin Your Journey
      </a>
    </div>
  </section>

  <!-- Console Section -->
  <section id="console-section">
    <h2 class="section-header">Quantum Mastery Console</h2>
    <div id="console-wrapper">
      <div id="console">
        <p class="system">>>> System online.</p>
        <p class="system">>>> Awaiting your query…</p>
      </div>
      <div id="input-bar">
        <input type="text" id="console-input" placeholder="Type a country or keyword" autocomplete="off" />
        <button id="console-send">Send</button>
      </div>
      <div class="mastery-container"><div class="mastery-bar" id="mastery-bar"></div></div>
    </div>
  </section>

  <!-- Steps Section -->
  <section id="steps-section">
    <h2 class="section-header">Operational Steps</h2>
    <div class="steps-grid">
      <div class="step" data-idx="1">
        <h3>1. Introduction &amp; Setup</h3>
        <p>Explain how currency reflects a country’s culture and history. Form groups of 3–5 participants and distribute diverse currencies【288058567004967†L39-L47】.</p>
      </div>
      <div class="step" data-idx="2">
        <h3>2. Distribute Clues</h3>
        <p>Provide each team with foreign currencies and attached clues to help them identify the origin【288058567004967†L48-L66】.</p>
      </div>
      <div class="step" data-idx="3">
        <h3>3. Investigate &amp; Analyze</h3>
        <p>Identify the country, examine the symbolism and history, and interpret how the design communicates identity【288058567004967†L69-L76】.</p>
      </div>
      <div class="step" data-idx="4">
        <h3>4. Present Findings</h3>
        <p>Share your discoveries with the class: reveal the country, explain the symbols, and discuss the cultural messages【288058567004967†L81-L87】.</p>
      </div>
      <div class="step" data-idx="5">
        <h3>5. Reflect &amp; Discuss</h3>
        <p>Reflect on themes and discuss how currency serves as a tool for intercultural communication【288058567004967†L89-L93】.</p>
      </div>
    </div>
  </section>

  <!-- Clue Cards Section -->
  <section id="clue-section">
    <h2 class="section-header">Interactive Clues</h2>
    <p style="text-align:center; max-width:700px; margin:0 auto 2rem; color:var(--muted);">Hover over each card to decipher which country the clue belongs to. Click or hover to reveal the answer and deepen your cultural mastery.</p>
    <div class="clue-grid">
      <!-- Mexico -->
      <div class="clue">
        <div class="clue-face clue-front">
          <h4>Clue #1</h4>
          <p>This currency features a monument that symbolizes freedom and the nation’s fight for independence—the figure is affectionately called the “angel” of freedom【288058567004967†L56-L58】.</p>
        </div>
        <div class="clue-face clue-back">
          <h4>Mexico</h4>
          <p>The Angel of Independence stands atop the peso, echoing the country’s triumphant struggle.</p>
        </div>
      </div>
      <!-- Israel -->
      <div class="clue">
        <div class="clue-face clue-front">
          <h4>Clue #2</h4>
          <p>This currency features the first prime minister, whose visionary leadership shaped the nation, alongside symbols of the journey to independence【288058567004967†L59-L61】.</p>
        </div>
        <div class="clue-face clue-back">
          <h4>Israel</h4>
          <p>David Ben‑Gurion appears on the new shekel, paired with imagery of Israel’s founding years.</p>
        </div>
      </div>
      <!-- Palestine -->
      <div class="clue">
        <div class="clue-face clue-front">
          <h4>Clue #3</h4>
          <p>This 2 mil coin is graced by an olive tree—a symbol of peace and endurance deeply rooted in this land【288058567004967†L62-L64】.</p>
        </div>
        <div class="clue-face clue-back">
          <h4>Palestine</h4>
          <p>The olive tree on the mil coin reflects resilience and the quest for harmony.</p>
        </div>
      </div>
      <!-- Canada -->
      <div class="clue">
        <div class="clue-face clue-front">
          <h4>Clue #4</h4>
          <p>This currency depicts a hardworking native animal that played a vital role in shaping the country’s economy【288058567004967†L65-L66】.</p>
        </div>
        <div class="clue-face clue-back">
          <h4>Canada</h4>
          <p>The Canadian loonie celebrates the industrious loon, emblematic of perseverance and commerce.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Gallery Section -->
  <section id="gallery-section">
    <h2 class="section-header">Gallery of Banknotes</h2>
    <p style="text-align:center; max-width:700px; margin:0 auto 2rem; color:var(--muted);">Explore a visual collection of currency imagery. Click an image to view it full size.</p>
    <div class="gallery-grid">
      <div class="gallery-item"><img src="assets/hero.png" alt="Abstract currency collage"></div>
      <div class="gallery-item"><img src="assets/dollars_coins.jpg" alt="Dollar coins and currency"></div>
      <div class="gallery-item"><img src="assets/students.jpg" alt="Students working together"></div>
    </div>
    <!-- Lightbox element -->
    <div class="lightbox" id="lightbox"><img src="" alt="enlarged"></div>
  </section>

  <!-- Testimonials -->
  <section id="testimonials-section">
    <h2 class="section-header">Voices of Insight</h2>
    <div class="testimonials">
      <div class="testimonial">
        <p>“This challenge opened my eyes to the stories hidden in the bills I use every day. It’s amazing how culture and history converge in our wallets.”</p>
        <div class="author">— Aisha K., Participant</div>
      </div>
      <div class="testimonial">
        <p>“Zenith made learning about economics feel like solving a mystery. I’ve never been more excited to research and present my findings.”</p>
        <div class="author">— Mateo L., Student</div>
      </div>
      <div class="testimonial">
        <p>“Our team’s discussion after the challenge helped us understand different perspectives and appreciate the power of symbolism.”</p>
        <div class="author">— Priya S., Educator</div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section id="faq-section">
    <h2 class="section-header">Frequently Asked Questions</h2>
    <div class="faq">
      <div class="faq-item">
        <h4>What is the goal of the Currency Clue Challenge?</h4>
        <p>The challenge encourages learners to investigate the cultural and historical narratives depicted on global currencies, fostering research, teamwork and critical thinking skills【288058567004967†L24-L29】.</p>
      </div>
      <div class="faq-item">
        <h4>How do I use the Quantum Mastery Console?</h4>
        <p>Enter a country name or keyword to receive immediate insights about the currency’s symbolism. Supported terms include Mexico, Israel, Palestine and Canada.</p>
      </div>
      <div class="faq-item">
        <h4>Can I run this site offline?</h4>
        <p>Yes. All assets, styles and scripts are embedded or stored locally, ensuring that the experience remains consistent without an internet connection.</p>
      </div>
    </div>
  </section>

  <!-- Resources Section -->
  <section id="resources-section">
    <h2 class="section-header">Scholarly &amp; Community Resources</h2>
    <div class="resources">
      <ul>
        <li><a href="https://doi.org/10.1163/15685209-12341439" target="_blank" rel="noopener">Sinisi F. (2017) – Royal imagery on Kushan coins【288058567004967†L100-L104】</a></li>
        <li><a href="https://www.gao.gov/archive/1999/gg99024.pdf" target="_blank" rel="noopener">GAO Report (1999) – New Dollar Coin: Statue of Liberty vs. Sacagawea【288058567004967†L105-L106】</a></li>
        <li><a href="https://www.theibns.org/joomla/index.php" target="_blank" rel="noopener">International Bank Note Society (IBNS)【288058567004967†L107-L109】</a></li>
        <li><a href="https://www.money.org/" target="_blank" rel="noopener">American Numismatic Association (ANA)【288058567004967†L109-L110】</a></li>
      </ul>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div style="max-width:900px;margin:0 auto;">
      <p>&copy; 2025 Zenith Protocol – Designed to ignite curiosity and cultivate a growth mindset.</p>
      <p style="margin-top:0.5rem;">Footnotes &amp; Citations:</p>
      <ol>
        <li>Introduction and learning objectives describing cultural exploration, research skills, communication and collaboration【288058567004967†L24-L29】.</li>
        <li>Step‑by‑step activity instructions including group formation, clue distribution, analysis and presentation【288058567004967†L39-L93】.</li>
        <li>Examples of clue cards featuring Mexico, Israel, Palestine and Canada【288058567004967†L56-L66】.</li>
        <li>References to scholarly sources and community resources for further study【288058567004967†L100-L110】.</li>
      </ol>
    </div>
  </footer>

  <script>
    // Scroll progress bar update
    const progressBar = document.getElementById('scroll-progress');
    window.addEventListener('scroll', () => {
      const scrollY = window.scrollY;
      const docHeight = document.documentElement.scrollHeight - window.innerHeight;
      const scrolled = docHeight > 0 ? (scrollY / docHeight) * 100 : 0;
      progressBar.style.width = scrolled + '%';
    });

    // Theme toggling between dark and light mode
    const toggle = document.getElementById('theme-toggle');
    toggle.addEventListener('click', () => {
      document.documentElement.classList.toggle('light-mode');
    });

    // Intersection observer for steps and testimonials reveal animations
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, { threshold: 0.15 });
    document.querySelectorAll('.step, .testimonial').forEach(el => observer.observe(el));

    // Console functionality with simple responses and typewriter effect
    (function() {
      const consoleEl = document.getElementById('console');
      const input = document.getElementById('console-input');
      const sendBtn = document.getElementById('console-send');
      const bar = document.getElementById('mastery-bar');
      let mastery = 0;
      function append(text, className) {
        const p = document.createElement('p');
        p.textContent = text;
        p.className = className;
        consoleEl.appendChild(p);
        consoleEl.scrollTop = consoleEl.scrollHeight;
      }
      function typeOut(text) {
        // typewriter effect for system messages
        let i = 0;
        const span = document.createElement('p');
        span.className = 'system';
        consoleEl.appendChild(span);
        const interval = setInterval(() => {
          span.textContent = text.substring(0, i);
          i++;
          if (i > text.length) {
            clearInterval(interval);
            consoleEl.scrollTop = consoleEl.scrollHeight;
          }
        }, 25);
      }
      function updateMastery() {
        mastery = Math.min(mastery + 25, 100);
        bar.style.width = mastery + '%';
      }
      function respond(value) {
        const v = value.toLowerCase();
        if (/mexico/.test(v)) {
          typeOut('Country detected: Mexico – The Angel of Independence stands tall on the peso.');
        } else if (/israel/.test(v)) {
          typeOut('Country detected: Israel – David Ben‑Gurion graces the shekel, a tribute to nation‑building.');
        } else if (/palestine/.test(v)) {
          typeOut('Country detected: Palestine – The olive tree symbolises peace and endurance.');
        } else if (/canada/.test(v)) {
          typeOut('Country detected: Canada – The loonie celebrates the noble loon.');
        } else {
          typeOut('No direct match found. Try entering Mexico, Israel, Palestine or Canada.');
        }
        updateMastery();
      }
      function handle() {
        const value = input.value.trim();
        if (!value) return;
        append('>>> ' + value, 'user');
        respond(value);
        input.value = '';
      }
      sendBtn.addEventListener('click', handle);
      input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          handle();
        }
      });
    })();

    // Gallery lightbox functionality
    (function() {
      const lightbox = document.getElementById('lightbox');
      const imgEl = lightbox.querySelector('img');
      document.querySelectorAll('.gallery-item img').forEach(img => {
        img.addEventListener('click', e => {
          imgEl.src = e.target.src;
          imgEl.alt = e.target.alt;
          lightbox.style.display = 'flex';
        });
      });
      lightbox.addEventListener('click', () => {
        lightbox.style.display = 'none';
      });
    })();
  </script>
</body>
</html>